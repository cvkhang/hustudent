paths:
  /api/matching/subjects:
    get:
      tags:
        - Subjects
      summary: Get all subjects
      parameters:
        - name: q
          in: query
          schema:
            type: string
          description: Search query
        - name: department
          in: query
          schema:
            type: string
      responses:
        '200':
          description: List of subjects

  /api/matching/subjects/{code}:
    get:
      tags:
        - Subjects
      summary: Get subject by code
      parameters:
        - name: code
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Subject details

  /api/matching/me/study-profile:
    get:
      tags:
        - Matching
      summary: Get my study profile
      security:
        - cookieAuth: []
      responses:
        '200':
          description: Study profile

    put:
      tags:
        - Matching
      summary: Update study profile
      security:
        - cookieAuth: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                major:
                  type: string
                academic_year:
                  type: string
                campus:
                  type: string
                study_modes:
                  type: array
                  items:
                    type: string
      responses:
        '200':
          description: Profile updated

  /api/matching/me/learning-status:
    put:
      tags:
        - Matching
      summary: Update learning status
      security:
        - cookieAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - status
              properties:
                status:
                  type: string
                  enum: [currently_learning, want_to_learn, completed]
                subjectCode:
                  type: string
      responses:
        '200':
          description: Status updated

  /api/matching/me/subjects:
    get:
      tags:
        - Matching
      summary: Get my subjects
      security:
        - cookieAuth: []
      responses:
        '200':
          description: List of user's subjects

    post:
      tags:
        - Matching
      summary: Add subject to my list
      security:
        - cookieAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - subjectCode
              properties:
                subjectCode:
                  type: string
                level:
                  type: string
                  enum: [beginner, intermediate, advanced]
                goals:
                  type: array
                  items:
                    type: string
                canHelp:
                  type: boolean
                needsHelp:
                  type: boolean
                semester:
                  type: string
      responses:
        '201':
          description: Subject added

  /api/matching/me/subjects/{code}:
    patch:
      tags:
        - Matching
      summary: Update user subject
      security:
        - cookieAuth: []
      parameters:
        - name: code
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Subject updated

    delete:
      tags:
        - Matching
      summary: Remove subject from my list
      security:
        - cookieAuth: []
      parameters:
        - name: code
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Subject removed

  /api/matching/matching/suggestions:
    get:
      tags:
        - Matching
      summary: Get friend suggestions
      description: Smart matching based on subjects, interests, and goals
      security:
        - cookieAuth: []
      parameters:
        - name: limit
          in: query
          schema:
            type: integer
            default: 20
      responses:
        '200':
          description: List of suggested users

  /api/matching/groups/recommended:
    get:
      tags:
        - Matching
      summary: Get recommended groups
      security:
        - cookieAuth: []
      parameters:
        - name: limit
          in: query
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: List of recommended groups

  /api/matching/study-invitations:
    get:
      tags:
        - Matching
      summary: Get study invitations
      security:
        - cookieAuth: []
      parameters:
        - name: type
          in: query
          schema:
            type: string
            enum: [sent, received]
            default: received
      responses:
        '200':
          description: List of invitations

    post:
      tags:
        - Matching
      summary: Send study invitation
      security:
        - cookieAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - toUserId
                - type
              properties:
                toUserId:
                  type: string
                type:
                  type: string
                  enum: [buddy, group, session]
                targetId:
                  type: string
                subjectCode:
                  type: string
                message:
                  type: string
      responses:
        '201':
          description: Invitation sent

  /api/matching/study-invitations/{id}/accept:
    post:
      tags:
        - Matching
      summary: Accept study invitation
      security:
        - cookieAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Invitation accepted

  /api/matching/study-invitations/{id}/decline:
    post:
      tags:
        - Matching
      summary: Decline study invitation
      security:
        - cookieAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Invitation declined

  /api/matching/me/buddies:
    get:
      tags:
        - Matching
      summary: Get my study buddies
      security:
        - cookieAuth: []
      responses:
        '200':
          description: List of study buddies
